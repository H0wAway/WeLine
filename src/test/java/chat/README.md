# 系统功能

## 服务端

1. 处理客户连接
2. 新连接客户端注册名字，并进行重名判断
3. 新用户注册后向客户端广播用户列表
4. 接收客户端消息并单播或广播

## 客户端

1. 向服务端发起连接
2. 用户注册名称
3. 接收服务端广播消息
4. 发送聊天消息，支持单播和广播

# 系统类设计

系统包括四个类，分别为：

1. 消息处理类：Message，处理消息的编解码
2. 消息枚举：MessageType，定义消息类型
3. 聊天服务端：ChatServer
4. 聊天客户端：ChatClient

# 业务流程

1. 服务端启动
2. 客户端启动
3. 客户端注册
    1. 服务端向客户端发送注册用户名提示，消息类型：REG_SERVER_SYN
    2. 客户端向服务端发送注册用户名，消息类型：REG_CLIENT_ACK
    3. 服务端向客户端发送注册确认消息，消息类型：REG_SERVER_ACK
    4. 服务端向所有客户端广播用户列表，消息类型：BROADCAST_USER_LIST
4. 发送聊天信息
    1. 客户端向服务端发送聊天信息，指定toUser为单播，否则广播，消息类型：CHAT_MSG_SEND
    2. 服务端接收聊天信息，进行单播或关闭，消息类型：CHAT_MSG_RECEIVE
    3. 客户端显示消息内容